<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #container{
            display: grid;
            grid-template-columns: repeat(3,1fr);
            gap: 20px;
            
        }
        .card{
            width: 520px;
            height: 350px;
            box-shadow: rgba(100,111,111,0.2)0px 7px 0px 29px;
            gap: 5px;
            padding: 2%;
            justify-items: center;
            text-align: center;
            align-items: center;

        }
        aside{
            display: flex;
            flex-direction: column;
            width: 200px;
            padding: 1%;
            
        }
        img{
            width: 50%;
            height: 50%;
            padding-left: 4%;
        }
        button{
            padding: 0.5%;
            border-radius: 5px;
        }
        #add{
            padding: 4%;
            background-color: blue;
            color: white;
        }
    </style>
</head>
<body>
    <nav>
        <select  id="categoryFilter">
            <option value="">category</option>
            <option value="all">All</option>
            <option value="auto">Auto</option>
            <option value="car">Car</option>
            <option value="truck">Truck</option>
            <option value="bus">Bus</option>
        </select>
        <select id="avaiFilter">
            <option value="">Availability</option>
            <option value="all">All</option>
            <option value="available">Available</option>
            <option value="unavailable">Unavailable</option>
        </select>
        <button id="clear">Clear Filter</button>
    </nav>
    <aside>
        <form id="fleet">
            <input type="text" id="reg" placeholder="Reg No of Vehicle" required><br><br>
            <select  id="category">
                <option value="">select</option>
                <option value="auto">Auto</option>
                <option value="car">Car</option>
                <option value="truck">Truck</option>
                <option value="bus">Bus</option>
            </select><br><br>
            <input type="text" id="name" placeholder="Driver Name" required><br><br>
            <select  id="avai">
                <option value="">select</option>
                <option value="available">Available</option>
                <option value="unavailable">Unavailable</option>
            </select><br><br>
            <button id="add">Add Fleet</button>
        </form>
    </aside>
    
        <div id="container"></div>
    
   
</body>
<script>
    const content =[];
    //add
    document.getElementById('add').addEventListener('click',(event)=>{
        event.preventDefault()
        const form = {
            reg:document.getElementById('reg').value,
            category: document.getElementById('category').value,
            name:document.getElementById('name').value,
            avai:document.getElementById('avai').value
        }
        content.push(form);
        renderCards(content)
        document.getElementById('reg').value='';
        document.getElementById('name').value='';
    })
    //update
    function update(index){
        const newName = prompt('Enter Driver name')
        if(newName !=='' && newName.trim()!==''){
            content[index].reg=newName
        }
        renderCards(content)
    }
    //change
    function change(index){
        const newAvai = prompt('Enter Availability')
        if(newAvai !=='' && newAvai.trim()!==''){
            content[index].avai=newAvai
        }
        renderCards(content)
    }
    //delete
    function deletebtn(index){
        confirm('are you sure');
        content.splice(index,1);
        renderCards(content)

    }
    //cate filter
    document.querySelector('#categoryFilter').addEventListener('change',()=>{
        let category =document.querySelector('#categoryFilter').value
        if(category =='all'){renderCards(content)

        }else{
            const filteredCat = content.filter(el => el.category == category)
            renderCards(filteredCat)
        }

        
    })
    //avai filter
       document.querySelector('#avaiFilter').addEventListener('change',()=>{
        let avai=document.querySelector('#avaiFilter').value
        if(avai == 'all'){
            renderCards(content)
        }else{
            const filteredAvai = content.filter(el => el.avai ==avai)
            renderCards(filteredAvai)
        }
        
    })
    //clear filter
    document.getElementById('clear').addEventListener('click',()=>{
        renderCards(content)
    })
    
    //rendering
    const container=document.querySelector('#container')
    function renderCards(data){
        container.innerHTML='';
        data.forEach((el,index)=>{
            const card=document.createElement('div')
            card.className=card;
            card.innerHTML=`
            <img src="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png" alt="">
            <h3>Reg no: ${el.reg}</h3>
            <p>category: ${el.category}</p>
            <p>Name: ${el.name}</p>
            <p>Availability: ${el.avai}</p>
            <button onclick="update(${index})">Updated Driver</button><br>
            <button onclick="change(${index})">change Availability</button><br>
            <button onclick="deletebtn(${index})">Delete Vehicle</button>
            `
            container.appendChild(card)
        })
    }
    renderCards(content)
</script>
</html>